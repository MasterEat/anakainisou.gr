(function setDynamicHome(){
var isGh=location.hostname.endsWith('github.io');
var projSeg=(location.pathname.split('/')[1]||'').trim();
var proj=projSeg?('/'+projSeg+'/'):'/';
var homeHref=isGh?proj:'/';
var normalize=function(path){
var normalized=(path||'/').replace(/\/+$/,'');
if(normalized.toLowerCase().endsWith('/index.html')){
normalized=normalized.slice(0,-11).replace(/\/+$/,'');
}
if(!normalized){return '/';}
return normalized;
};
var here=normalize(location.pathname||'/');
var target=normalize(homeHref);
document.querySelectorAll('a[data-home]').forEach(function(a){
a.href=homeHref;
a.addEventListener('click',function(event){
if(here===target){
event.preventDefault();
window.scrollTo({top:0,behavior:'smooth'});
}
});
if(here===target){
a.setAttribute('aria-current','page');
}
});
})();
(()=>{
const descriptionMeta=document.querySelector('meta[name="description"]');
const aboutSection=document.getElementById('about');
if(!descriptionMeta||!aboutSection){return;}
const seoMap={
'':{
title:'Ανακαινίσεις Σπιτιών & Επαγγελματικών Αθήνα | FM Renovation',
description:'Ολικές & μερικές ανακαινίσεις σε Αθήνα και Αττική με ποιότητα, συνέπεια και προσιτό κόστος από την FM Renovation. Ζητήστε προσφορά σήμερα.'
},
'#about':{
title:'Σχετικά με την FM Renovation στην Αθήνα | FM Renovation',
description:'Γνωρίστε την ομάδα της FM Renovation στην Αθήνα με εμπειρία σε ανακαινίσεις κατοικιών και επαγγελματικών χώρων σε όλη την Αττική. Επικοινωνήστε μαζί μας.'
},
'#services':{
title:'Υπηρεσίες Ανακαίνισης Αθήνα | FM Renovation',
description:'Ανακαινίσεις κουζίνας, μπάνιου και επαγγελματικών χώρων στην Αθήνα & Αττική από την FM Renovation. Επιλέξτε ολοκληρωμένες λύσεις και ζητήστε προσφορά σήμερα.'
},
'#contact':{
title:'Επικοινωνία για Ανακαινίσεις Αθήνα | FM Renovation',
description:'Επικοινωνήστε με την FM Renovation στην Αθήνα για ανακαινίσεις κατοικιών ή επαγγελματικών χώρων σε όλη την Αττική. Κλείστε ραντεβού ή ζητήστε προσφορά τώρα.'
}
};
const normalizeHash=function(rawHash){
if(!rawHash){return'';}
const hash=rawHash.trim();
if(hash===''||hash==='#'||hash==='#top'||hash==='#home'){return'';}
if(hash.toLowerCase()==='#contactform'){return'#contact';}
return hash.toLowerCase();
};
const applySeo=function(targetHash){
const normalized=normalizeHash(targetHash);
const config=seoMap.hasOwnProperty(normalized)?seoMap[normalized]:seoMap[''];
if(!config){return;}
if(document.title!==config.title){
document.title=config.title;
}
if(descriptionMeta.getAttribute('content')!==config.description){
descriptionMeta.setAttribute('content',config.description);
}
};
window.addEventListener('hashchange',function(){
applySeo(location.hash);
});
document.addEventListener('DOMContentLoaded',function(){
applySeo(location.hash);
});
})();
const body=document.body;
const navToggle=document.querySelector('[data-nav-toggle]');
const navOverlay=document.getElementById('mobile-menu');
const navBackdrop=document.querySelector('[data-nav-backdrop]');
const navClose=document.querySelector('[data-nav-close]');
const desktopMedia=window.matchMedia('(min-width: 768px)');
const prefersReducedMotion=window.matchMedia('(prefers-reduced-motion: reduce)');
const focusableSelectors="a[href]:not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']), [tabindex]:not([tabindex='-1'])";
let menuOpen=false;
function getFocusableElements(){
if(!navOverlay){return[];}
return Array.from(navOverlay.querySelectorAll(focusableSelectors)).filter(function(el){
return el.tabIndex>=0&&!el.hasAttribute('disabled');
});
}
function trapFocus(event){
if(!menuOpen||event.key!=='Tab'){return;}
const focusable=getFocusableElements();
if(!focusable.length){return;}
const first=focusable[0];
const last=focusable[focusable.length-1];
if(event.shiftKey){
if(document.activeElement===first){
event.preventDefault();
last.focus();
}
}else if(document.activeElement===last){
event.preventDefault();
first.focus();
}
}
function handleOverlayEsc(event){
if(event.key==='Escape'&&menuOpen){
event.preventDefault();
closeMenu();
}
}
function openMenu(){
if(!navToggle||!navOverlay||!navBackdrop||menuOpen){return;}
menuOpen=true;
navOverlay.hidden=false;
navBackdrop.hidden=false;
body.classList.add('nav-open');
navToggle.classList.add('is-active');
navToggle.setAttribute('aria-expanded','true');
navToggle.setAttribute('aria-label','Κλείσιμο μενού');
requestAnimationFrame(function(){
navOverlay.classList.add('is-active');
navBackdrop.classList.add('is-active');
});
navOverlay.addEventListener('keydown',trapFocus);
document.addEventListener('keydown',handleOverlayEsc);
const focusTarget=navOverlay.querySelector('[data-nav-close]')||getFocusableElements()[0];
if(focusTarget){
setTimeout(function(){
focusTarget.focus({preventScroll:true});
},20);
}
}
function closeMenu(returnFocus){
if(returnFocus===undefined){returnFocus=true;}
if(!navToggle||!navOverlay||!navBackdrop){return;}
if(navOverlay.hidden&&!menuOpen){
return;
}
menuOpen=false;
navOverlay.classList.remove('is-active');
navBackdrop.classList.remove('is-active');
body.classList.remove('nav-open');
navToggle.classList.remove('is-active');
navToggle.setAttribute('aria-expanded','false');
navToggle.setAttribute('aria-label','Άνοιγμα μενού');
document.removeEventListener('keydown',handleOverlayEsc);
navOverlay.removeEventListener('keydown',trapFocus);
const finalize=function(){
navOverlay.hidden=true;
navBackdrop.hidden=true;
};
if(prefersReducedMotion.matches){
finalize();
}else{
const timer=setTimeout(finalize,320);
navOverlay.addEventListener('transitionend',function handler(){
finalize();
clearTimeout(timer);
navOverlay.removeEventListener('transitionend',handler);
});
}
if(returnFocus&&navToggle.offsetParent!==null){
navToggle.focus({preventScroll:true});
}
}
if(navToggle&&navOverlay&&navBackdrop){
navToggle.addEventListener('click',function(){
if(menuOpen){closeMenu();}
else{openMenu();}
});
if(navClose){navClose.addEventListener('click',function(){closeMenu();});}
navBackdrop.addEventListener('click',function(){closeMenu();});
if(navOverlay){
var overlayLinks=navOverlay.querySelectorAll('a.nav-mobile__link, a.nav-mobile__cta');
overlayLinks.forEach(function(link){
link.addEventListener('click',function(){closeMenu();});
});
}
const handleDesktopChange=function(event){
if(event.matches){closeMenu(false);}
};
if(typeof desktopMedia.addEventListener==='function'){
desktopMedia.addEventListener('change',handleDesktopChange);
}else if(typeof desktopMedia.addListener==='function'){
desktopMedia.addListener(handleDesktopChange);
}
}
const siteHeader=document.querySelector('.site-header');
if(siteHeader){
const updateHeaderShadow=function(){
if(window.scrollY>4){
siteHeader.classList.add('is-scrolled');
}else{
siteHeader.classList.remove('is-scrolled');
}
};
updateHeaderShadow();
window.addEventListener('scroll',updateHeaderShadow,{passive:true});
}
const servicesSection=document.getElementById('services');
const servicesNavLinks=Array.from(document.querySelectorAll('a.nav__link[href$="#services"], a.nav-mobile__link[href$="#services"]'));
if('IntersectionObserver'in window&&servicesSection&&servicesNavLinks.length){
const toggleActive=function(isActive){
servicesNavLinks.forEach(function(link){
link.classList.toggle('nav__link--active',isActive);
});
};
const observer=new IntersectionObserver(function(entries){
entries.forEach(function(entry){
toggleActive(entry.isIntersecting&&entry.intersectionRatio>=0.4);
});
},{threshold:0.4});
observer.observe(servicesSection);
}
document.querySelectorAll('.service-card .service-header').forEach(btn=>{
const card=btn.closest('.service-card');
const content=card?card.querySelector('.service-content'):null;
let closeTimer=null;
let closeHandler=null;
const clearPendingClose=()=>{
if(closeTimer!==null){
clearTimeout(closeTimer);
closeTimer=null;
}
if(content&&closeHandler){
content.removeEventListener('transitionend',closeHandler);
closeHandler=null;
}
};
const scheduleHide=()=>{
if(!content){return;}
clearPendingClose();
closeHandler=()=>{
content.hidden=true;
clearPendingClose();
};
content.addEventListener('transitionend',closeHandler);
closeTimer=window.setTimeout(closeHandler,360);
};
if(content){
if(card&&card.classList.contains('open')){
content.hidden=false;
btn.setAttribute('aria-expanded','true');
}else{
content.hidden=true;
btn.setAttribute('aria-expanded','false');
}
}
btn.addEventListener('click',()=>{
if(!card){return;}
const isOpen=card.classList.contains('open');
if(isOpen){
card.classList.remove('open');
btn.setAttribute('aria-expanded','false');
if(content){
clearPendingClose();
if(prefersReducedMotion.matches){
content.hidden=true;
}else{
scheduleHide();
}
}
}else{
if(content){
clearPendingClose();
content.hidden=false;
}
card.classList.add('open');
btn.setAttribute('aria-expanded','true');
}
});
btn.addEventListener('pointerdown',event=>{
const rect=event.currentTarget.getBoundingClientRect();
event.currentTarget.style.setProperty('--rx',`${event.clientX-rect.left}px`);
event.currentTarget.style.setProperty('--ry',`${event.clientY-rect.top}px`);
});
});
if('IntersectionObserver'in window){
const io=new IntersectionObserver(entries=>{
entries.forEach(entry=>{
if(entry.isIntersecting){
entry.target.classList.add('in');
io.unobserve(entry.target);
}
});
},{threshold:0.12});
document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
}else{
document.querySelectorAll('.reveal').forEach(el=>el.classList.add('in'));
}
const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear();
(function(){
const imgs=[...document.querySelectorAll('.hero-slider img[data-hero]')];
if(!imgs.length) return;
let i=0; imgs[0].classList.add('active');
setInterval(()=>{
imgs[i].classList.remove('active');
i=(i+1)%imgs.length;
imgs[i].classList.add('active');
},4000);
})();
const stepDesc=document.getElementById('step-desc');
document.querySelectorAll('.step').forEach(btn=>{
btn.addEventListener('click',()=>{
document.querySelectorAll('.step').forEach(b=>b.removeAttribute('aria-current'));
btn.setAttribute('aria-current','true');
const m={
1:'Επίσκεψη στον χώρο, αποτύπωση και μελέτη αναγκών.',
2:'Γραπτή προσφορά με σαφή παραδοτέα και χρονοδιάγραμμα.',
3:'Συντονισμός συνεργείων & ποιοτικός έλεγχος.',
4:'Καθαρή παράδοση και after-sales υποστήριξη.'
};
stepDesc.textContent=m[btn.dataset.step]||'';
});
});
document.querySelectorAll('[data-carousel]').forEach(car=>{
const track=car.querySelector('[data-track]');
car.querySelector('.prev')?.addEventListener('click',()=>track.scrollBy({left:-track.clientWidth*0.8,behavior:'smooth'}));
car.querySelector('.next')?.addEventListener('click',()=>track.scrollBy({left:track.clientWidth*0.8,behavior:'smooth'}));
});
(function(){
const track=document.querySelector('#gallery .car-track');
if(!track){return;}
const register=()=>{
const images=Array.from(track.querySelectorAll('img'));
if(!images.length){return;}
images.forEach((img,index)=>{
if(!(img instanceof HTMLImageElement)){return;}
if(img.dataset.lbInitialized==='true'){return;}
img.dataset.lbInitialized='true';
img.classList.add('lb-trigger');
img.dataset.lbGroup='home-gallery';
img.dataset.lbIndex=String(index);
if(!img.dataset.full){
const full=img.currentSrc||img.src||'';
if(full){img.dataset.full=full;}
}
img.setAttribute('role','button');
img.setAttribute('tabindex','0');
img.setAttribute('aria-haspopup','dialog');
img.style.cursor='zoom-in';
const open=()=>{
if(typeof window.openLightboxFromEl==='function'){
window.openLightboxFromEl(img);
}
};
img.addEventListener('click',open);
img.addEventListener('keydown',event=>{
if(event.key==='Enter'||event.key===' '){
event.preventDefault();
open();
}
});
});
};
register();
window.addEventListener('lightbox:ready',register);
})();
(function(){
const widget=document.querySelector('.contact-widget');
if(!widget){return;}
const toggle=widget.querySelector('.contact-widget__toggle');
const panel=widget.querySelector('.contact-widget__panel');
if(!toggle||!panel){return;}
function setState(open){
toggle.setAttribute('aria-expanded',String(open));
panel.classList.toggle('is-open',open);
panel.setAttribute('aria-hidden',String(!open));
toggle.setAttribute(
'aria-label',
open?'Κλείσιμο επιλογών επικοινωνίας':'Άνοιγμα επιλογών επικοινωνίας'
);
}
toggle.addEventListener('click',function(){
const isOpen=panel.classList.contains('is-open');
setState(!isOpen);
});
document.addEventListener('click',function(event){
if(!panel.classList.contains('is-open')){return;}
if(widget.contains(event.target)){return;}
setState(false);
});
document.addEventListener('keydown',function(event){
if(event.key==='Escape'){
setState(false);
}
});
})();
(function(){
const backToTop=document.getElementById('backToTop');
if(!backToTop){return;}
let isVisible=false;
let footerVisible=false;
const showAfter=300;
function setInteractiveState(active){
backToTop.setAttribute('aria-hidden',String(!active));
if(active){
backToTop.removeAttribute('tabindex');
}else{
backToTop.setAttribute('tabindex','-1');
}
}
setInteractiveState(false);
const updateVisibility=function(){
const shouldShow=window.scrollY>showAfter&&!footerVisible;
if(shouldShow===isVisible){
return;
}
isVisible=shouldShow;
backToTop.classList.toggle('is-visible',shouldShow);
setInteractiveState(shouldShow);
};
window.addEventListener('scroll',updateVisibility,{passive:true});
window.addEventListener('resize',updateVisibility);
window.addEventListener('load',updateVisibility);
backToTop.addEventListener('click',function(){
window.scrollTo({top:0,behavior:prefersReducedMotion.matches?'auto':'smooth'});
});
if('IntersectionObserver'in window){
const footer=document.querySelector('.site-footer');
if(footer){
const observer=new IntersectionObserver(function(entries){
entries.forEach(function(entry){
footerVisible=entry.isIntersecting;
updateVisibility();
});
},{threshold:0.1});
observer.observe(footer);
}
}
})();
(function(){
const fadeEls=document.querySelectorAll('[data-animate="fade-up"]');
if(!fadeEls.length){
return;
}
if(!('IntersectionObserver'in window)){
fadeEls.forEach(function(el){
el.classList.add('visible');
});
return;
}
const observer=new IntersectionObserver(function(entries){
entries.forEach(function(entry){
if(entry.isIntersecting){
entry.target.classList.add('visible');
observer.unobserve(entry.target);
}
});
},{
threshold:0.1,
rootMargin:'0px 0px 20% 0px'
});
fadeEls.forEach(function(el){
observer.observe(el);
});
})();
document.querySelectorAll('.logo-link').forEach(function(link){
link.addEventListener('click',function(event){
if(window.location.pathname.endsWith('index.html')||window.location.pathname==='/'){
event.preventDefault();
window.scrollTo({top:0,behavior:'smooth'});
setTimeout(function(){
window.location.reload();
},300);
}
});
});
(()=>{
const form=document.getElementById('contactForm');
if(!form){return;}
const status=document.getElementById('form-status');
form.addEventListener('submit',async event=>{
event.preventDefault();
if(!form.checkValidity()){
if(status){
status.hidden=false;
status.textContent='Παρακαλώ συμπληρώστε τα απαραίτητα πεδία.';
}
if(typeof form.reportValidity==='function'){
form.reportValidity();
}
setTimeout(()=>{if(status){status.hidden=true;}},7000);
return;
}
if(status){status.hidden=false;status.textContent='Αποστολή...';}
try{
const data=new FormData(form);
const res=await fetch(form.action,{method:'POST',body:data,headers:{'Accept':'application/json'}});
if(res.ok){
form.reset();
if(status){status.textContent='✅ Το μήνυμά σας στάλθηκε με επιτυχία! Θα επικοινωνήσουμε σύντομα.';}
}else if(status){
status.textContent='❌ Κάτι πήγε στραβά. Δοκιμάστε ξανά ή καλέστε μας.';
}
}catch(error){
if(status){status.textContent='❌ Πρόβλημα δικτύου. Δοκιμάστε ξανά.';}
}
setTimeout(()=>{if(status){status.hidden=true;}},7000);
});
})();